\setcounter{chapter}{-1}
\chapter{Categories}
\label{categorychapter}


The language of categories is not strictly necessary to understand the basics
of  commutative
algebra. Nonetheless, it is extremely convenient and powerful. It will clarify
many of the constructions made in the future when we can freely use terms like
``universal property'' or ``adjoint functor.'' As a result, we begin this book
with a brief introduction to their theory. We only scratch the surface; the
interested reader can pursue further study in \cite{Ma98}.


Nonetheless, the reader is advised not to take the present chapter too
seriously; skipping it for the moment to chapter 1 and returning here as a
reference could be quite reasonable.

\section{Introduction}
\newcommand{\ob}{\operatorname{ob}}

\subsection{Definitions}

Categories are supposed to be places where mathematical objects live.
Intuitively, to any given type of structure (e.g. groups, rings, etc.),
there should be a
category of objects with that structure. These are not, of course, the only
type of categories, but they will be the primary ones of concern to us in this
book.


The basic idea of a category is that there should be objects, and that one
should be able to map between objects. These mappings could be functions, and
they often are, but they don't have to be. One has to be able to compose
mappings. Nothing else is required.

\begin{definition}
A \textbf{category} $\mathcal{C}$ consists of:
\begin{enumerate}
\item  A collection of \textbf{objects},
$\ob \mathcal{C}$.
\item For each pair of objects $X, Y \in
\ob \mathcal{C}$, a set
of \textbf{morphisms} $\hom_{\mathcal{C}}(X, Y)$ (abbreviated $\hom(X,Y)$).
\item For each object $X \in \ob\mathcal{C}$, there is an \textbf{identity
morphism}
$1 \in \hom_{\mathcal{C}}(X, X)$.
\item There is a \textbf{composition law}
$\hom_{\mathcal{C}}(X, Y) \times \hom_{\mathcal{C}}(Y, Z) \to
\hom_{\mathcal{C}}(X, Z), (g, f) \to g
\circ f$ for every
triple $X, Y, Z$ of objects.
\item  The composition law is unital (that is, left or right composition with
the identity has no effect) and associative.
\end{enumerate}
\end{definition}

We shall write $X \to Y$ to denote an element of $\hom_{\mathcal{C}}(X, Y)$.

$\mathcal{C}$ is the storehouse for mathematical objects: groups, Lie algebras,
rings, etc.
\begin{example}
\begin{enumerate}
\item $\mathcal{C}  = \mathbf{Sets}$; the objects are sets, and the morphisms
are maps of sets.
\item $\mathcal{C} = \mathbf{Grps}$; the objects are groups, and the morphisms
are maps of groups (i.e. homomorphisms).
\item $\mathcal{C} = \mathbf{LieAlg}$; the objects are Lie algebras, and the
morphisms are maps of Lie algebras (i.e. homomorphisms).\footnote{Feel free to
omit if the notion of Lie algebra is unfamiliar.}
\item  $\mathcal{C} = \mathbf{Vect}_k$; the objects are vector spaces over a
field $k$, and the morphisms are linear maps.
\item  This example is slightly more subtle. Here the category $\mathcal{C}$
has objects consisting of topological spaces, but the morphisms between two
topological spaces $X,Y$ are the \emph{homotopy classes} of maps $X \to Y$.
Since composition respects homotopy classes, this is well-defined.
\end{enumerate}
\end{example}



In general, the objects of a category don not have to form a set; they can
be too large for
that.
For instance, the collection of objects in $\mathbf{Sets}$ does not form a set.

\begin{definition} 
A category is \textbf{small} if the collection of objects is a set.
\end{definition} 

The standard examples of categories are the ones above: structured sets
together with structure-preserving maps. Nonetheless, one can easily give
other examples that are not of this form.

\begin{example}
Let $G$ be a finite group. Then we can make a category $B_G$ where the objects
just consist of one point $\ast$ and the maps $\ast \to \ast$ are the elements
of $G$. The identity is the identity of $G$ and composition is multiplication
in the group.

In this case, the category doesn't represent  a class of objects, but
instead we think of the composition law as the key thing. So a group is a
special kind of category.
\end{example}

\begin{example}
A monoid is precisely a category with one object. Recall that a \textbf{monoid}
has an associative and unital multiplication (not necessarily inverses).
\end{example}

There is, however, a major difference between category theory and set theory.
There is \textbf{nothing} in the language of categories that lets one look
\emph{inside} an object. We think of vector spaces having elements, spaces
having points, etc.
By contrast, categories treat these kinds of things as invisible. There
is nothing ``inside'' of an object $X \in \mathcal{C}$; the only way to
understand $X$ is
to understand the ways one can map into and out of $X$.

\begin{example}
In the category of topological spaces, one can in fact recover the
``underlying set'' of a topological space via the hom-sets. Namely, for each
topological space, the points of $X$ are the same thing as the mappings from a
one-point space into $X$. Later we will say that the functor assigning to each
space its underlying set is \emph{corepresentable.}
\end{example}

\subsection{The language of commutative diagrams}

While the language of categories is, of course, purely algebraic, it will be
convenient for psychological reasons to visualize categorical arguments
through diagrams.
We shall introduce this notation here.

Let $\mathcal{C}$ be a category, and let $X, Y$ be objects in $\mathcal{C}$.
If $f \in \hom(X, Y)$, we shall sometimes write $f$ as an arrow
\[ X \to Y  \]
or
\[ X \stackrel{f}{\to} Y \]
as if $f$ were an actual function.
If $X \stackrel{f}{\to} Y$ and $Y \stackrel{g}{\to} Z$ are morphisms,
composition $g \circ f: X \to Z$ can be visualized by the picture
\[ X \stackrel{f}{\to} Y \stackrel{g}{\to} Z.\]

Finally, when we work with several objects, we shall often draw collections of
morphisms into diagrams, where arrows indicate morphisms between two objects.
A diagram will be said to \textbf{commute} if whenever one goes from one
object in the diagram to another by following the arrows in the right order,
one obtains the same morphism.
For instance, the commutativity of the diagram
\[ \xymatrix{
X \ar[d]^f \ar[r]^{f'} &  W \ar[d]^g \\
Y \ar[r]^{g'} &  Z
}\]
is equivalent to the assertion that
\[ g \circ f' = g' \circ f \in \hom(X, Z).  \]


\section{Functors}

\subsection{Covariant functors}
Let $\mathcal{C}, \mathcal{D}$ be categories. If $\mathcal{C}, \mathcal{D}$
are categories of structured sets (of possibly different types), there may be a
way to associate objects in $\mathcal{D}$ to objects in $\mathcal{C}$. For
instance, to every group $G$ we can associate its \emph{group ring}
$\mathbb{Z}[G]$
 (which we do not define here).
In many cases, given a map between objects in $\mathcal{C}$ preserving the
relevant structure, there will be an induced map on the corresponding objects
in $\mathcal{D}$. It is from here that we define a \emph{functor.}

\begin{definition}
A \textbf{functor} $F: \mathcal{C} \to \mathcal{D}$ consists of a function $F:
\mathcal{C} \to  \mathcal{D}$ (that is, a rule that assigns to each object
in $\mathcal{C}$ an object of $\mathcal{D}$) and, for each pair $X, Y \in
\mathcal{C}$,
a map
$F: \hom_{\mathcal{C}}(X, Y) \to \hom_{\mathcal{D}}(FX, FY)$, which preserves
the identity
maps and composition.
\end{definition}

In detail, the last two conditions state the following. First, if $X \in
\mathcal{C}$, then $F(1_X)$ is the identity morphism $1_{F(X)}: F(X) \to
F(X)$.The second is that if $A \stackrel{f}{\to} B \stackrel{g}{\to} C$ are
morphisms in $\mathcal{C}$, 
then $F(g \circ f) = F(g) \circ F(f)$ as morphisms $F(A) \to F(C)$.
Alternatively, we can say that $F$ \emph{preserves commutative diagrams.}

\begin{example}
There is a functor from $\mathbf{Sets} \to \mathbf{AbelianGrp}$ sending a set
$S$ to a free abelian group on the set.
\end{example}

\begin{example}[For readers that know some algebraic topology]
There is a functor from $\mathbf{TopSpaces} \to \mathbf{GradedAbGrp}$
(categories of topological spaces and graded abelian groups) sending a
space $X$ to its homology groups $H_*(X)$. We know that given a map of spaces,
we get a map of graded abelian groups.
\end{example}

\begin{definition} 
If $\mathcal{C}, \mathcal{D}, \mathcal{E}$ are categories, $F: \mathcal{C} \to
\mathcal{D}, G: \mathcal{D} \to \mathcal{E}$ are covariant functors, then one
can define a \textbf{composite functor}
\[ F \circ G: \mathcal{C}  \to \mathcal{E}  \]
This sends an object $X \in \mathcal{C}$ to $G(F(X))$.
Similarly, a morphism $f :X \to Y$ is sent to $G(F(f)): G(F(X)) \to G(F(Y))$.
We leave the reader to check that this is well-defined.
\end{definition}

\begin{exercise}
What is the category of categories? (Ignore set-theoretic issues.)
\end{exercise}


\begin{example}
What is a functor $B_G \stackrel{}{\to} \mathbf{Sets}$? Here $B_G$ is the
category alluded to above.

The unique object $\ast$ goes to some set $X$. For each element $g \in G$, we
get a map $g: \ast \to \ast$ and thus a map $X \to X$. This is supposed to
preserve the composition law (which in $G$ is just multiplication), as well as
identities.

In particular, we get maps $i_G: X \to X$ corresponding to each $g \in G$, such
that the following diagram commutes:
\[ \xymatrix{
X \ar[r]^{i_{g_1}} \ar[rd]_{i_{g_1g_2}} & X \ar[d]^{i_{g_2}} \\ & X
}\]
So a functor $B_G \to \mathbf{Sets}$ is just a left $G$-action on a set $X$.
\end{example}

Sometimes what we have described above are called \textbf{covariant functors}.
Indeed:

\begin{definition}
A \textbf{contravariant functor}  $\mathcal{C}
\stackrel{F}{\to}\mathcal{D}$ (between categories $\mathcal{C}, \mathcal{D}$) issimilar
data except that now a map $X \stackrel{f}{\to} Y$ now goes to a map $FY
\stackrel{F(f)}{\to} FX$. Composites
are required to be preserved, albeit in the other direction.
\end{definition}

A contravariant functor also preserves commutative diagrams, except that the
arrows have to be reversed. For instance, if $F: \mathcal{C} \to \mathcal{D}$
is contravariant and the diagram
\[ \xymatrix{
A \ar[d] \ar[r] &  C\\
B \ar[ru]
}\]
is commutative in $\mathcal{C}$, then the diagram
\[ \xymatrix{
F(A)   & \ar[l] \ar[ld] F(C)\\
F(B) \ar[u] 
}\]
commutes in $\mathcal{D}$.

One can, of course, compose contravariant functors.

Similarly:

\begin{example}
A \textbf{contravariant} functor from $B_G$ to $\mathbf{Sets}$ corresponds to a
set with a \emph{right} $G$-action.
\end{example}

\begin{example}
On the category $\mathbf{Vect}$ of vector spaces over a field $k$, we
have
the contravariant functor
\[ V \mapsto V^{\ast}.  \]
sending a vector space to its dual $V^{\ast} = \hom(V,k)$.
Given a map $V \to W$ of vector spaces, there is an induced map
\[ W^{\ast} \to V^{\ast}  \]
given by the transpose.
\end{example}

\begin{example}
If we map $B_G \to B_G$ sending $\ast \mapsto \ast$ and $g \mapsto g^{-1}$, we
get a
contravariant functor.
\end{example}

\begin{exercise}
Let $\mathcal{C}$ be a category. Define the \textbf{opposite category}
$\mathcal{C}^{op}$ of $\mathcal{C}$ to have the same objects as
$\mathcal{C}$  but such that the morphsims between $X,Y$ in
$\mathcal{C}^{op}$
are those between $Y$ and $X$ in $\mathcal{C}$.
Show that there is a contravariant functor $\mathcal{C} \to
\mathcal{C}^{op}$.
\end{exercise}

\subsection{Isomorphisms}

Clasically, one can define an isomorphism of groups as a bijection that
preserves the group structure. This does not generalize well to categories, as
we do not have a notion of ``bijection.'' Thus we make:

\begin{definition}
An \textbf{isomorphism} between objects $X, Y$ in a category $\mathcal{C}$ is a
map $f: X \to Y$ such that there exists $g: Y \to X$ with
\[ g \circ f = 1_X, \quad f \circ g = 1_Y.  \]
\end{definition}

This is more correct than the idea of being one-to-one and onto. A bijection of
topological spaces is not necessarily a homeomorphism.


\begin{exercise}
Work this out for yourselves. Suppose you have two functors $B_G \to
\mathbf{Sets}$, i.e. $G$-sets. What's a natural transformation between them?
\end{exercise}

Now we want to prove a theorem.
\begin{proposition}
If $f: X \to Y$ is a map in $\mathcal{C}$, and $F: \mathcal{C} \to \mathcal{D}$
is a functor, then $F(f): FX \to FY$ is an isomorphism.
\end{proposition}

The proof is quite straightforward, though there is an important point here.


\begin{proof}
If we have maps $f: X \to Y$ and $g : Y \to X$ such that the composites both
ways are identities, then we can apply the functor $F$ to this, and we find
that since
\[ f \circ g = 1_Y, \quad g \circ f = 1_X,   \]
that
\[ F(f) \circ F(g) = 1_{F(Y)}, \quad F(g) \circ F(f) = 1_{F(X)}.  \]
We have used the fact that functors preserve composition and identities. This
implies that $F(f)$ is an isomorphism.
\end{proof}

Categories have a way of making things so general that are trivial. Hence,
this material is called general abstract nonsense. 
Moreover, there is another philosophical point about category theory to
be made here: often, it is the definitions, and not the proofs, that matter.
For instance, what matters here is not the theorem, but the \emph{definition of
an
isomorphism.} It is a categorical one, and much more general than the usual
notion via injectivity and surjectivity.


There is room, nevertheless, for something else. Instead of having
something that sends objects to other objects, one could have something that
sends an object to a map.



\subsection{Natural transformations}



Suppose $F, G: \mathcal{C} \to \mathcal{D}$ are functors.

\begin{definition}
A \textbf{natural transformation} $T: F \to G$ consists of the following data.
For each $X \in C$, there is a morphism $TX: FX \to GX$ satisfying the
following
condition. Whenever $f: X \to Y$ is a morphism, the following diagram must
commute:
\[ \xymatrix{
FX \ar[d]^{TX }\ar[r] &  FY \ar[d]^{TY}  \\
GX \ar[r] &  GY
}.\]
\end{definition}

When we say that things are ``natural'' in the future, we will mean that the
transformation between functors is natural in this sense.
Some people don't like this. They don't like to use the language of categories.
If you really try to go in and examine things, it can be hard to figure out
what things really mean.
However, we will use it to state theorems conveniently.



\section{Various universal constructions}

Now that we have introduced the idea of a category and showed that a functor
takes isomorphisms to isomorphisms, we can characterize objects in terms of maps. This is useful since the modern philosophy of mathematics is that knowing ``all the maps from and to an object'' is the same as knowing the interal structure of the object. This idea led to the creation of various characterizations of objects known as universal properties. 
As motivation, we first discuss the concept of the ``product'' in terms of a universal property. 

\subsection{Products}
Recall that if we have two sets $X$ and $Y$, the product $X\times Y$ is the set of all elements of the form $(x,y)$ where $x\in X$ and $y\in Y$. The product is also equipped with natural projections $p_1$ and $p_2$ that take $(x,y)$ to $x$ and $y$ respectively. Thus any element of $X\times Y$ is uniquely determined by where they project to on $X$ and $Y$. In fact, in general, this is the case; if we have an index set $I$ and a product $X=\prod_{i\in I} X_i$, then an element $x\in X$ determined uniquely by where where the projections $p_i(x)$ land in $X_i$. This also means that if we have any other set $S$ with maps $f_i:S\rightarrow X_i$ then there is a unique map $S\rightarrow X=\prod_{i\in I}X_i$ given by sending $s\in S$ to the element $\{ f_i(s)\}_{i\in I}$. This leads to the following characterization of a product using only ``mapping properties.''

\begin{definition} Let $\{X_i\}_{i\in I}$ be a collection of objects in some category $\mathcal{C}$ Then a set $P$ with projections $p_i: P\rightarrow X_i$ is said to be the product $\prod_{i\in I} X_i$ if the following ``universal property'' holds:
let $S$ be any other object in $\mathcal{C}$ with maps $f_i:S\rightarrow X_i$. Then there is a unique morphism $f:S\rightarrow P$ such that $p_i f = f_i$. \end{definition}
\begin{example} One of the benefits of this construction is that an actual category is not specified; thus when we take $\mathcal{C}$ to be Sets, we recover the cartesian product notion of sets, but if we take $\mathcal{C}$ to be groups, we achieve the regular notion of the product of groups (the reader is invited to check these statements). \end{example}
\begin{exercise} If we reverse the arrows in the above construction, show that the universal property obtained (known as the ``coproduct'') characterizes disjoint unions in the category of sets and direct sums in the category of groups. Notice that on the level of sets, these two objects are different (hence showing that the universal object is dependent on one's choice of category; another example of this will be given later). \end{exercise}
This idea of a universal mapping property leads us to investigate this notion more thoroughly.  


\subsection{Initial and terminal objects}

\begin{definition}
Let $\mathcal{C}$ be a category. An \textbf{initial object} in a category is an
object $X \in \mathcal{C}$ with the property that $\mathcal{C}(X, Y)$ has one
element for all $Y \in \mathcal{C}$.

So there is a unique map out of $X$ into each $Y \in \mathcal{C}$.
\end{definition}


\begin{example}
If $\mathcal{C}$ is $\mathbf{Sets}$, then the empty set $\emptyset$ is an
initial object. There is a unique map from the empty set into any other set;
one has to make no decisions about where elements are to map when
constructing a map $\emptyset \to X$.
\end{example}

It seems too abstract to be useful. But it is.

There is a dual notion, called a \textbf{terminal object}, where every object
can map into it in precisely one way.
\begin{definition}
A \textbf{terminal object} in a category $\mathcal{C}$ is an object $Y \in
\mathcal{C}$ such that $\mathcal{C}(X, Y) = \ast$ for each $X \in \mathcal{C}$.
\end{definition}

\begin{example}
The one point set is a terminal object in $\mathbf{Sets}$.
\end{example}

The important thing about the next ``theorems'' is the conceptual framework.
\begin{theorem}
Any two initial (resp. terminal) objects in $\mathcal{C}$ are isomorphic by a
unique isomorphism.
\end{theorem}
\begin{proof}
The proof is really easy. We do it for terminal objects. Say $Y, Y'$ are
terminal objects. Then $\mathcal{C}(Y, Y')$ and $\mathcal{C}(Y', Y)$ are one
point sets. So there are unique maps $Y \to Y', Y' \to Y$, whose composites
must be the identities: we know that $\mathcal{C}(Y, Y) , \mathcal{C}(Y', Y')$
are one-point sets. This means that the maps $Y \to Y', Y' \to Y$ are
isomorphisms.
\end{proof}

There is a philosophical point to be made here. We have characterized an object
uniquely in terms of mapping properties. We have characterized it
\emph{uniquely up to unique isomorphism,} which is really the best you can do
in mathematics. Two sets are not generally the ``same,'' but they may be
isomorphic up to unique isomorphism. They are different,
but the sets are isomorphic up
to unique isomorphism.

\subsection{Push-outs and pull-backs}

Now we are going to talk about a bunch of other examples, which can all be
phrased via initial or terminal objects in some category. This,
therefore, is the proof for \emph{everything} we will do in this section.

Suppose we have a diagram
\[
\xymatrix{
A \ar[d] \ar[r] &  B \ar[d] \\
C \ar[r] &  X}
\]
We can say what it means for this to be a \textbf{push-out}.

\begin{definition}
A square like this,
\[
\xymatrix{
A \ar[d] \ar[r] &  B \ar[d] \\
C \ar[r] &  X}.
\]
is a \textbf{pushout square} (and $X$ is called the \textbf{push-out}) if,
given a diagram
\[ \xymatrix{
A \ar[r] \ar[d]  &  B \ar[dd] \\
C \ar[rd] & \\
& Y
}\]
there is a unique map $X \to Y$ making the following diagram commute:

\[
\xymatrix{
A \ar[d] \ar[r] &  B \ar[d] \ar[rdd] \\
C \ar[r] \ar[rrd] &  X \ar[rd] \\
& & Y'}
\]
Sometimes push-outs are also called \textbf{fibered coproducts}.
\end{definition}

\begin{example}
The following is a pushout square in the category of abelian groups:
\[ \xymatrix{
\mathbb{Z}/2 \ar[r] \ar[d]  &  \mathbb{Z}/4 \ar[d]  \\
\mathbb{Z}/6 \ar[r] &  \mathbb{Z}/12
}\]
In the category of groups, the push-out is actually
$\mathrm{SL}_2(\mathbb{Z})$---this is a cool theorem. The point is that being a
push-out is actually dependent on the category.
\end{example}

\begin{example}
Let $R$ be a commutative ring and let $S$ and $Q$ be two commutative
$R$-algebras. In otherwords, suppose
we have two maps of rings $s:R\rightarrow S$ and $q:R\rightarrow Q$. Then we canfit this information together
into a pushout square:

\[ \xymatrix{
R \ar[r] \ar[d]  &  S \ar[d]   \\
Q \ar[r] &X
}\]
It turns out that the pushout in this case is the tensor product of algebras
$S\otimes_R Q$. This is particularly important
in algebraic geometry as the dual construction will give the correct notion of
``products'' in the category of schemes over
a field.\end{example}

\begin{proposition}
If the push-out of
\[ \xymatrix{
A \ar[d] \ar[r] & B \\
C
}\]
exists, it is unique up to unique isomorphism.
\end{proposition}
\begin{proof}
We can prove this in two ways. One is that suppose I had two pushout squares
\[
\xymatrix{
A \ar[d] \ar[r] &  B \ar[d] \ar[rdd] \\
C \ar[r] \ar[rrd] &  X \\
& & X'}
\]
Then there are unique maps $X \to X', X' \to X$ from the universal property,
which have to be isomorphisms.

Alternatively, we can phrase push-outs in terms of initial objects. We could
consider the category of all cartesian diagrams as above with $A,B,C$ and
mapping into something else; then the initial
object in this category is the push-out.
\end{proof}

Often when studying categorical constructions, one can create a kind of ``dual''
construction by reversing the direction of the arrows. This is exactly the
relationship between the push-out construction and the pull-back construction.
So suppose we have two morphisms $B \to D$ and $C\to D$.
\begin{definition}
The \textbf{pull-back} is an object $X$ with two morphisms $X\to B$ and $X\to C$
such that the following diagram commutes

\[ \xymatrix {
P \ar[d] \ar[r] & B \ar[d]\\
A\ar[r] & C }\]

Moreover, the object $P$ is universal in the following sense: given any $P'$ and
maps $P'\to A$ and $P'\to B$ making the square commute, there is a unique map
$P'\to P$ making the following diagram commute:
\[
\xymatrix{
 P' \ar[rd] \ar[rrd] \ar[ddr] \\
& P \ar[d] \ar[r] &  B \ar[d] \\
& A \ar[r] &  C }\]
Dual to the notion of a push-out, sometimes the pull-back is also called the
\textbf{fibered product}.
\end{definition}

\begin{example} As said above, the fact that the tensor product of algebras is a
push-out in the category of
commutative $R$-algebras allows for the correct notion of the ``product'' of
schemes. We now elaborate on this example: naively one would think that we could
pick the underlying space of the product scheme to just be the topological
product of two Zariski topologies. However, it is an easy exercise to check that
the product of two Zariski topologies in general is not Zariski! This motivates
the need for a different concept.

Suppose we have a field $k$ and two $k$-algebras $A$ and $B$ and let $X=Spec(A)$
and $Y=Spec(B)$ be the affine $k$-schemes corresponding to $A$ and $B$. Consider
the follwing pull-back diagram:
\[
\xymatrix{
X\times_{Spec(k)} Y \ar[d] \ar[r] &X \ar[d]\\
Y \ar[r] &Spec(k) }\]

Now, since $Spec$ is a contravariant functor, the arrows in this pull-back
diagram have been flipped; so in fact, $X\times_{Spec(k)} Y$ is actually
$Spec(A\otimes _k B)$. This construction is motivated by the following example:
let $A=k[x]$ and $B=k[y]$. Then $Spec(A)$ and $Spec(B)$ are both affine lines
$\mathbb{A}^1_k$ so we want a suitable notion of product that makes the product
of $Spec(A)$ and $Spec(B)$ the affine plane. The pull-back construction is the
correct one since $Spec(A)\times_{Spec(k)} Spec(B)=Spec(A\otimes_k
B)=Spec(k[x,y])=\mathbb{A}^2_k$.
\end{example}

Now we abstract on this idea further.

\subsection{Colimits}


We now want to generalize the push-out.
Instead of a shape with $A,B,C$, we do something more general.

Start with a small category $I$: recall that this means that the objects of $I$
form a set. One is supposed to picture
is that $I$ is something like the category
\[
\xymatrix{
\ast \ar[d] \ar[r] &  \ast \\
\ast
}
\]
or the category
\[ \ast \rightrightarrows \ast.  \]
We will formulate the notion of a \textbf{colimit} which will specialize to the
push-out when $I$ is the first case. $I$ is to be called  the  \textbf{indexing
category}.


So we will look at functors
\[ F: I \to \mathcal{C},  \]
which in the case of the three-element category, will just
 correspond to
diagrams
\[ \xymatrix{A \ar[d]  \ar[r] &  B \\ C}.  \]

We will call a \textbf{cone} on $F$ (this is an ambiguous term) an object $X
\in \mathcal{C}$ equipped with maps $F_i \to X, \forall i \in I$ such that for
all maps $i \to
i' \in I$, the diagram below commutes:
\[ \xymatrix{
F_i \ar[d] \ar[r] &  X \\
F_{i'} \ar[ru]
}.\]

An example would be a cone on the three-element category above: then
this is just a commutative diagram
\[ \xymatrix{
A \ar[r]\ar[d]  &  B \ar[d]  \\
C \ar[r] &  D
}.\]

\newcommand{\colim}{\mathrm{colim}}

\begin{definition}
The \textbf{colimit} of the diagram $F: I \to \mathcal{C}$, written as $\colim
F$ or $\colim_I F $ or $\varinjlim_I F$, if it exists, is a cone $F \to X$ with
the property that if $F \to Y$ is any other cone, then there is a unique map $X
\to Y$ making the diagram
\[ \xymatrix{
F  \ar[rd] \ar[r] &  X \ar[d]  \\
& Y
}\]
commute. (This means that the corresponding diagram with $F_i$ replacing $F$
commutes for each $i \in I$.)
\end{definition}

We could think of some weird category where cones are objects and the colimit
is initial. In any case, we see:

\begin{proposition}
$\colim F$, if it exists, is unique up to unique isomorphism.
\end{proposition}

Let us go through some examples. We already looked at push-outs.

\begin{example}
Consider the category $I$ described by
\[ \ast, \ast, \ast, \ast.  \]
A functor $F: I \to \mathbf{Sets}$ is just a list of four sets $A, B, C, D$.
The colimit is just the disjoint union $A \sqcup B \sqcup C \sqcup D$. This is
the universal property of the disjoint union. To hom out of the disjoint union
is the same thing as homming out of each piece.
\end{example}


\begin{example}
Suppose we had the same category $I$ but we went into abelian groups. Then $F$
corresponds, again, to a list of four abelian groups. The colimit is the direct
sum. Again, the direct sum is characterized by the same universal property.
\end{example}

\begin{example}
Suppose we had the same $I$ ($\ast, \ast, \ast, \ast$) but the category of
groups was $\mathcal{C}$. Then the colimit is the
free product of the four groups.
\end{example}

\begin{example}
Suppose we had the same $I$ and the category $\mathcal{C}$ was of commutative
rings with unit. Then the colimit is the tensor product.
\end{example}

So the idea unifies a whole bunch of constructions.
Now let us take a different example.

\begin{example}
Take
\[ I = \ast \rightrightarrows \ast.  \]
So a functor $I \to \mathbf{Sets}$ is a diagram
\[ A \rightrightarrows B.  \]
Call the two maps $f,g: A \to B$. To get the colimit, we take $B$ and mod out
by the equivalence relation generated by $f(a) \sim g(a)$.
To hom out of this is the same thing as homming  out of $B$ such that the
pullbacks to $A$ are the same.

This is the relation \textbf{generated} as above, not just as above. It can get
tricky.
\end{example}

\begin{definition}
When $I$ is just a bunch of points  $\ast, \ast, \ast, \dots$ with no
nonidentity morphisms, then the
colimit over $I$ is called the \textbf{coproduct}.
\end{definition}

We use the coproduct to mean things like direct sums, disjoint unions, and
tensor products.

\begin{definition}
When $I$ is $\ast \rightrightarrows \ast$, the colimit is called the
\textbf{coequalizer}.
\end{definition}

\begin{theorem}
If $\mathcal{C}$ has all coproducts and coequalizers, then it has all colimits.
\end{theorem}

\begin{proof}
Let $F: I \to \mathcal{C}$ be a functor, where $I$ is a small category. We
need to obtain an object $X$ with morphisms
\[ Fi \to X, \quad i \in I  \]
such that for each $f: i \to i'$, the diagram below commutes:
\[ 
\xymatrix{
Fi \ar[d] \ar[r] &  Fi' \ar[ld] \\
X
}
\]
and such that $X$ is universal among such diagrams.

To give such a diagram, however, is equivalent to giving a collection of maps
\[ Fi \to X  \]
that satisfy some conditions. So $X$ should be thought of as a quotient of the
coproduct $\sqcup_i Fi$.
Let us consider the coproduct $\sqcup_{i \in I, f} Fi$, where $f$ ranges over
all
morphisms in the category $I$ that start from $i$.
We construct two maps 
\[ \sqcup_f Fi \rightrightarrows \sqcup_f Fi,  \]
whose coequalizer will be that of $F$. The first map is the identity. The
second map sends a factor 
\end{proof}

\subsection{Limits}
As in the example with pull-backs and push-outs and products and coproducts, one can define a colimit by using the exact same universal property above just with all the arrows reversed. 
\begin{example} The product is an example of a limit where the indexing category is a small category $I$ with no morphisms other than the identity. This example shows the power of universal constructions; by looking at colimits and limits, a whole variety of seemingly unrelated mathematical constructions are shown to be in the same spirit.\end{example}

\subsection{Filtered colimits}


\emph{Filtered colimits} are colimits
over special indexing categories $I$ which look like totally ordered sets.
These have several convenient properties as compared to general colimits.
For instance, in the category of \emph{modules} over a ring (to be studied in
\rref{foundations}), we shall see that filtered colimits actually
preserve injections and surjections. In fact, they are \emph{exact.} This is
not true in more general categories which are similarly structured.



\begin{definition}
An indexing category is \textbf{filtered} if the following hold:
\begin{enumerate}
\item Given $i_0, i_1 \in I$, there is a third object $i \in I$ such that both
$i_0, i_1$ map into $i$.
So there is a diagram
\[ \xymatrix{
i_0 \ar[rd] \\
& i \\
i_1 \ar[ru]
}.\]
\item Given any two maps $i_0 \rightrightarrows i_1$, there exists $i$ and $i_1
\to i$ such that the two maps $i_0 \rightrightarrows i$ are equal:
intuitively, any two ways
of pushing an object into another can be made into the same eventually.
\end{enumerate}
\end{definition}

\begin{example}
If $I$ is the category
\[ \ast \to \ast \to \ast \to \dots,  \]
i.e. the category generated by the poset $\mathbb{Z}_{\geq 0}$, then that is
filtered.
\end{example}


\begin{example}
If $G$ is a torsion-free abelian group, the category $I$ of finitely generated
subgroups of $G$ and inclusion maps is filtered. We don't actually need the
lack of torsion.
\end{example}

\begin{definition}
Colimits over a filtered category are called \textbf{filtered colimits}.
\end{definition}

\begin{example}
Any torsion-free abelian group is the filtered colimit of its finitely
generated subgroups, which are free abelian groups.
\end{example}
This gives a simple approach for showing that a torsion-free abelian group is
flat.

\begin{proposition}
If $I$ is filtered\footnote{Some people say filtering.} and $\mathcal{C} =
\mathbf{Sets}, \mathbf{Abgrp}, \mathbf{Grps}$, etc., and $F: I \to \mathcal{C}$
is a functor, then $\colim_I F$ exists and is given by the disjoint union of
$F_i, i \in I$ modulo the relation $x \in F_i$ is equivalent to $x' \in F_{i'}$
if $x$ maps to $x'$ under $F_i \to F_{i'}$. This is already an equivalence
relation.
\end{proposition}

The fact that the relation given above is transitive uses the filtering of the
indexing set. Otherwise, we would need to use the relation generated by it.

\begin{example}
Take $\mathbb{Q}$. This is the filtered colimit of the free submodules
$\mathbb{Z}(1/n)$.

Alternatively, choose a sequence of numbers $m_1 , m_2, \dots, $ such that for
all $p, n$, we have $p^n \mid m_i$ for $i \gg 0$. Then we have a sequence of
maps
\[ \mathbb{Z} \stackrel{m_1}{\to} \mathbb{Z} \stackrel{m_2}{\to}\mathbb{Z}
\to \dots.   \]
The colimit of this is $\mathbb{Q}$. There is a quick way of seeing this, which
is left to the reader.
\end{example}

When we have a functor $F: I \to \mathbf{Sets}, \mathbf{Grps},
\mathbf{Modules}$ taking values in a ``nice'' category (e.g. the category of
sets, modules, etc.), you can construct the colimit by taking the union of the
$F_i, i \in I$ and quotienting by the equivalence relation $x \in F_i \sim x'
\in F_{i'}$ if $f: i \to i'$ sends $x$ into $x'$. This is already an
equivalence relation, as one can check.

Another way of saying this is that we have the disjoint union of the $F_i$
modulo the relation that $a \in F_i$ and $b \in F_{i'}$ are equivalent if and
only if there is a later $i''$ with maps $i \to i'', i' \to i''$ such that
$a,b$ both map to the same thing in $F_{i''}$.


\subsection{The initial object theorem}

We now prove a fairly nontrivial result, due to Freyd. This gives a sufficient
condition for the existence of initial objects.

Let $\mathcal{C}$ be a category. Then we recall that $A \in \mathcal{C}$ if
for each $X \in \mathcal{C}$, there is a \emph{unique} $A \to X$.
Let us consider the weaker condition that for each $ X \in \mathcal{C}$, there
exists \emph{a} map $A \to X$.

\begin{definition} Suppose $\mathcal{C}$ has equalizers.
If $A \in \mathcal{C}$ is such that $\hom_{\mathcal{C}}(A, X) \neq \emptyset$
for each $X \in \mathcal{C}$, then $X$ is called \textbf{weakly initial.}
\end{definition} 

We now want to get an initial object from a weakly initial object. 
To do this, note first that if $A$ is weakly initial and $B$ is any object
with a morphism $B \to A$, then $B$ is weakly initial too. So we are going to
take
our initial object to be a very small subobject of $A$.
It is going to be so small as to guarantee the uniqueness condition of an
initial object. To make it small, we equalize all endomorphisms.

\begin{proposition} 
If  $A$ is a weakly initial object in $\mathcal{C}$,
then the equalizer of all endomorphisms $A \to A$ is initial for $\mathcal{C}$.
\end{proposition} 
\begin{proof} 
Let $A'$ be this equalizer; it is endowed with a morphism $A'\to A$. Then let usrecall what this means. For any two
endomorphisms $A \rightrightarrows A$, the two pull-backs $A'
\rightrightarrows A$ are equal. Moreover, if $B \to A$ is a morphism that has
this property, then $B$ factors uniquely through $A'$.

Now $A' \to A$ is a morphism, so by the remarks above, $A'$ is weakly initial:
to each $X \in \mathcal{C}$, there exists a morphism $A' \to X$.
However, we need to show that it is unique.

So suppose given two maps $f,g: A' \rightrightarrows X$. We are going to show
that they are equal. If not, consider their equalizer $O$.
Then we have a morphism $O \to A'$ such that the postcompositions with $f,g$
are equal. But by weak initialness, there is a map $A \to O$; thus we get a
composite
\[ A \to O \to A'.  \]
We claim that this is a \emph{section} of the embedding $A'\to A$.
This will prove the result. Indeed, we will have constructed a section $A \to
A'$, and since it factors through $O$, the two maps
\[ A \to O \to A' \rightrightarrows X  \]
are equal. Thus, composing each of these with the inclusion $A' \to A$ shows
that $f,g$ were equal in the first place.

Thus we are reduced to proving:
\begin{lemma} 
Let $A$ be an object of a category $\mathcal{C}$. Let $A'$ be the equalizer of
all endomorphisms of $A$. Then any morphism $A \to A'$ is a section of the
inclusion $A' \to A$.
\end{lemma} 
\begin{proof} 
Consider the canonical inclusion $i: A' \to A$. We are given some map $s: A
\to A'$; we must show that $si = 1_{A'}$.
Indeed, consider the composition
\[ A' \stackrel{i}{\to} A \stackrel{s}{\to} A' \stackrel{i}{\to} A .\]
Now $i$ equalizes endomorphisms of $A$; in particular, this composition is the
same as 
\[ A' \stackrel{i}{\to} A \stackrel{\mathrm{id}}{\to} A; \]
that is, it equals $i$. So the map $si: A' \to A$ has the property that $isi =
i$ as maps $A' \to A$. But $i$ being a monomorphism, it follows that $si  =
1_{A'}$.
\end{proof} 
\end{proof} 

\add{define complete and cocomplete}
\add{monics and epics}
\begin{theorem}[Freyd]
Let $\mathcal{C}$ be a complete category. Then $\mathcal{C}$ has an initial
object if and only if the following \textbf{solution set condition holds:}
there is a set $\left\{X_i, i \in I\right\}$ of objects in $\mathcal{C}$ such
that any $X \in \mathcal{C}$ can be mapped into by one of these.
\end{theorem} 

The idea is that the family $\left\{X_i\right\}$ is somehow weakly universal
\emph{together.}
\begin{proof} 
If $\mathcal{C}$ has an initial object, we may just consider that as the
family $\left\{X_i\right\}$: we can hom out (uniquely!) from a universal
object into anything, or in other words a universal object is weakly universal.

Suppose we have a ``weakly universal family'' $\left\{X_i\right\}$. Then the
product $\prod X_i$ is weakly universal. Indeed, if $X \in \mathcal{C}$,
choose some $i'$ and a morphism $X_{i'} \to X$ by the hypothesis. Then this map
composed with the projection from the product gives a map  $\prod X_i \to
X_{i'} \to X$.
\end{proof} 

\section{Yoneda's lemma}

\add{this section is barely fleshed out}

Let $\mathcal{C}$ be a category.
In general, we have said that there is no way to study an object in  a
category other than by considering maps into and out of it.
We will see that essentially everything about $X \in \mathcal{C}$ can be
recovered from these hom-sets.
We will thus get an embedding of $\mathcal{C}$ into a category of functors.

\subsection{The functors $h_X$}

We now use the structure of a category to construct hom functors.
\begin{definition} 
Let $X \in \mathcal{C}$. We define the contravariant functor $h_X: \mathcal{C}
\to \mathbf{Sets}$ via
\[ h_X(Y) = \hom_{\mathcal{C}}(Y, X).  \]
\end{definition} 

This is, indeed, a functor. If $g: Y \to Y'$, then precomposition gives a map
of sets
\[ h_X(Y') \to h_X(Y),  \quad f \mapsto f \circ g \]
which satisfies all the usual identities.

As a functor, $h_X$ encodes \emph{all} the information about
how one can map into $X$.
It turns out that one can basically recover $X$ from $h_X$, though.

\subsection{The Yoneda lemma}

Let $X \stackrel{f}{\to} X'$ be a morphism in $\mathcal{C}$.
Then for each $Y \in \mathcal{C}$, composition gives a map
\[ \hom_{\mathcal{C}}(Y, X) \to \hom_{\mathcal{C}}(Y, X').  \]
It is easy to see that this induces a \emph{natural} transformation
\[ h_{X} \to h_{X'}.  \]
Thus we get a map of sets
\[ \hom_{\mathcal{C}}(X, X') \to \hom(h_X, h_{X'}),  \]
where $h_X, h_{X'}$ lie in the category of contravariant functors $\mathcal{C}
\to \mathbf{Sets}$.
In other words, we have defined a \emph{covariant functor}
\[ \mathcal{C} \to \mathbf{Fun}(\mathcal{C}^{op}, \mathbf{Sets}).  \]

\begin{theorem}[Yoneda's lemma] If $X, X' \in \mathcal{C}$, then the map 
$\hom_{\mathcal{C}}(X, X') \to \hom(h_X, h_{X'})$ is a bijection. That is,
every natural transformation $h_X \to h_{X'}$ arises in one and only one way
from a morphism $X \to X'$.
\end{theorem} 


\begin{theorem}[Strong Yoneda lemma]
\end{theorem} 

\subsection{Representable functors}

\begin{definition} 
A contravariant functor $F: \mathcal{C} \to \mathbf{Sets}$ is
\textbf{representable} if it is naturally isomorphic to some $h_X$.
\end{definition} 

The point of a representable functor is that it can be realized as maps into a
specific object. 
In fact, let us look at a specific feature of the functor $h_X$. 
Consider the object $\alpha \in h_X(X)$ that corresponds to the identity.
Then any morphism
\[ Y \to X  \]
factors \emph{uniquely}
as \[ Y \to X \stackrel{\alpha}{\to } X  \]
(this is completely trivial!) so that 
any element of $h_X(Y)$ is a $f^*(\alpha)$ for precisely one $f:  Y \to X$.

\begin{definition} 
Let $F: \mathcal{C} \to \mathbf{Sets}$ be a contravariant functor. A
\textbf{universal object} for $\mathcal{C}$ is a pair $(X, \alpha)$ where $X
\in \mathcal{C}, \alpha \in F(X)$ such that the following condition holds:
if $Y$ is any object and $\beta \in F(Y)$, then there is a unique $f: Y \to X$
such that $\alpha$ pulls back to $\beta$ under $f$. 

In other words, $\beta = f^*(\alpha)$.
\end{definition} 

The condition of a universal object



The article \cite{Vi08} by Vistoli contains a good introduction to and several
examples of this theory.
Here is one of them:

\begin{example} 
Consider the contravariant functor $F: \mathbf{Sets} \to \mathbf{Sets}$ that
sends any set $S$ to its power set $2^S$ (i.e. the collection of subsets).
This is a contravariant functor: if $f: S \to T$, there is a morphism
\[ 2^T \to 2^S, \quad T' \mapsto f^{-1}(T').  \]

This is a representable functor. Indeed, the universal object can be taken as
the pair
\[ * \left\{0,1\right\}, \left\{1\right\}).  \]

To understand this, note that a subset $S;$ of $S$ determines its
\emph{characteristic function} $\chi_{S'}: S \to \left\{0,1\right\}$ that
takes the value $1$ on $S$ and $0$ elsewhere.
If we consider $\chi_{S'}$ as a morphism $ S \to \left\{0,1\right\}$, we see
that
\[ S' = \chi_{S'}^{-1}(\{1\}).  \]
Moreover, the set of subsets is in natural bijection with the set of
characteristic functions, which in turn are precisely \emph{all} the maps $S
\to \left\{0,1\right\}$. From this the assertion is clear.
\end{example} 

We shall meet some elementary criteria for the representability of
contravariant functors in the next subsection. For now, we note\footnote{The
reader unfamiliar with algebraic topology may omit these remarks.} that in
algebraic topology, one often works with the \emph{homotopy category} of
pointed CW complexes (where morphisms are pointed continuous maps modulo
homotopy), any contravariant functor that satisfies two relatively mild
conditions (a
Mayer-Vietoris condition and a condition on coproducts), is automatically
representable by a theorem of Brown. In particular, this implies that the
singular cohomology functors $H^n(-, G)$ (with coefficients in some group $G$)
are representable; the representing objects are the so-called
Eilenberg-MacLane spaces  $K(G,n)$.  See \cite{Ha02}.


\subsection{Limits as representable functors}

\add{}

\subsection{Criteria for representability}

It is clear from the previous section 




\add{Yoneda's lemma}
\add{limits}
